--
-- PostgreSQL database dump
--

-- Dumped from database version 13.11 (Debian 13.11-0+deb11u1)
-- Dumped by pg_dump version 13.11 (Debian 13.11-0+deb11u1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: fc_calc_note(); Type: PROCEDURE; Schema: public; Owner: postgres
--

CREATE PROCEDURE public.fc_calc_note()
    LANGUAGE plpgsql
    AS $$
DECLARE
note int := 1;
max_note int :=0;
BEGIN
max_note := (SELECT MAX(id_sale) from sales);
FOR  note IN note.. max_note
LOOP
UPDATE sales SET val_rec = ( SELECT SUM( total_product ) FROM itens_sale WHERE fk_sale = note ) WHERE id_sale = note;
UPDATE sales SET total_sale = val_rec - disc_sale WHERE id_sale = note;
END LOOP;
END;
$$;


ALTER PROCEDURE public.fc_calc_note() OWNER TO postgres;

--
-- Name: fc_sum_note(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fc_sum_note() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
UPDATE itens_sale
SET total_product = val_product * amount_product
WHERE fk_sale = NEW.fk_sale;
UPDATE sales SET val_rec = ( SELECT SUM( total_product )
FROM itens_sale WHERE fk_sale = NEW.fk_sale )
WHERE id_sale = NEW.fk_sale;                          
UPDATE sales
SET total_sale = val_rec - disc_sale
WHERE id_sale = NEW.fk_sale;
RETURN NEW;
END;
$$;


ALTER FUNCTION public.fc_sum_note() OWNER TO postgres;

--
-- Name: total_sales(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.total_sales(note_init integer) RETURNS numeric
    LANGUAGE plpgsql
    AS $$
DECLARE 
total_sales NUMERIC := 0;  
BEGIN  
SELECT SUM(total_sale) INTO total_sales FROM sales
WHERE id_sale > note_init;  
RETURN total_sales;
END; $$;


ALTER FUNCTION public.total_sales(note_init integer) OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: brands; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.brands (
    id_brand integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone,
    name_brand character varying(60) NOT NULL
);


ALTER TABLE public.brands OWNER TO postgres;

--
-- Name: brands_id_brand_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.brands_id_brand_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.brands_id_brand_seq OWNER TO postgres;

--
-- Name: brands_id_brand_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.brands_id_brand_seq OWNED BY public.brands.id_brand;


--
-- Name: contacts; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.contacts (
    id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone,
    name character varying(60) NOT NULL,
    email character varying(60) NOT NULL,
    phone character varying(11) NOT NULL,
    comments character varying(250) NOT NULL
);


ALTER TABLE public.contacts OWNER TO postgres;

--
-- Name: contacts_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.contacts_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.contacts_id_seq OWNER TO postgres;

--
-- Name: contacts_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.contacts_id_seq OWNED BY public.contacts.id;


--
-- Name: filiais; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.filiais (
    id_filial integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone,
    name_filial character varying(60) NOT NULL,
    fantasia character varying(60) NOT NULL,
    address character varying(60) NOT NULL,
    cnpj character varying(14) NOT NULL,
    inscric character varying(14) NOT NULL,
    phone character varying(11) NOT NULL,
    email character varying(60) NOT NULL
);


ALTER TABLE public.filiais OWNER TO postgres;

--
-- Name: filiais_id_filial_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.filiais_id_filial_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.filiais_id_filial_seq OWNER TO postgres;

--
-- Name: filiais_id_filial_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.filiais_id_filial_seq OWNED BY public.filiais.id_filial;


--
-- Name: itens_sale; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.itens_sale (
    id_item_sequen integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    fk_sale integer NOT NULL,
    fk_product integer NOT NULL,
    amount_product integer NOT NULL,
    val_product numeric(18,2) NOT NULL,
    total_product numeric(18,2) NOT NULL
);


ALTER TABLE public.itens_sale OWNER TO postgres;

--
-- Name: products; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.products (
    id_product integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone,
    descric_product character varying(60) NOT NULL,
    val_max_product numeric(18,2) NOT NULL,
    val_min_product numeric(18,2) NOT NULL,
    fk_brand integer NOT NULL,
    fk_sector integer NOT NULL,
    bar_code character varying(200) NOT NULL,
    image character varying(30)
);


ALTER TABLE public.products OWNER TO postgres;

--
-- Name: sales; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.sales (
    id_sale integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    fk_name_pers integer NOT NULL,
    val_rec numeric(18,2),
    disc_sale numeric(18,2) NOT NULL,
    total_sale numeric(18,2),
    fk_name_filial integer NOT NULL,
    fk_name_user integer NOT NULL
);


ALTER TABLE public.sales OWNER TO postgres;

--
-- Name: sectors; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.sectors (
    id_sector integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone,
    name_sector character varying(60) NOT NULL
);


ALTER TABLE public.sectors OWNER TO postgres;

--
-- Name: itens_nota; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.itens_nota AS
 SELECT sales.id_sale AS id_venda,
    itens_sale.fk_product AS item,
    products.descric_product AS descricao,
    brands.name_brand AS marca,
    sectors.name_sector AS setor,
    itens_sale.amount_product AS quant,
    itens_sale.val_product AS valor,
    itens_sale.total_product AS total
   FROM ((((public.sales
     JOIN public.itens_sale ON ((sales.id_sale = itens_sale.fk_sale)))
     JOIN public.products ON ((products.id_product = itens_sale.fk_product)))
     JOIN public.brands ON ((brands.id_brand = products.fk_brand)))
     JOIN public.sectors ON ((sectors.id_sector = products.fk_sector)));


ALTER TABLE public.itens_nota OWNER TO postgres;

--
-- Name: itens_sale_id_item_sequen_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.itens_sale_id_item_sequen_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.itens_sale_id_item_sequen_seq OWNER TO postgres;

--
-- Name: itens_sale_id_item_sequen_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.itens_sale_id_item_sequen_seq OWNED BY public.itens_sale.id_item_sequen;


--
-- Name: persons; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.persons (
    id_person integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone,
    name_pers character varying(60) NOT NULL,
    cpf_pers character varying(11) NOT NULL,
    address_pers character varying(60) NOT NULL,
    fk_name_filial integer NOT NULL,
    fk_id_user integer NOT NULL,
    phone_pers character varying(11) NOT NULL
);


ALTER TABLE public.persons OWNER TO postgres;

--
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone,
    name character varying(60) NOT NULL,
    username character varying(60) NOT NULL,
    password character varying(255) NOT NULL,
    privilege character varying(255) DEFAULT 2 NOT NULL
);


ALTER TABLE public.users OWNER TO postgres;

--
-- Name: nota; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.nota AS
 SELECT sales.id_sale AS nota,
    filiais.name_filial AS filial,
    filiais.fantasia,
    filiais.address AS f_endereco,
    filiais.cnpj,
    filiais.inscric AS inscricao,
    filiais.phone AS f_telefone,
    filiais.email AS f_email,
    persons.name_pers AS comprador,
    persons.cpf_pers AS cpf,
    persons.address_pers AS endereco,
    persons.phone_pers AS telefone,
    users.name AS usuario,
    users.username AS email,
    sales.created_at AS emitida,
    sales.val_rec,
    sales.disc_sale AS desc_venda,
    sales.total_sale AS total_venda
   FROM (((public.sales
     JOIN public.filiais ON ((filiais.id_filial = sales.fk_name_filial)))
     JOIN public.persons ON ((persons.id_person = sales.fk_name_pers)))
     JOIN public.users ON ((users.id = sales.fk_name_user)));


ALTER TABLE public.nota OWNER TO postgres;

--
-- Name: persons_id_person_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.persons_id_person_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.persons_id_person_seq OWNER TO postgres;

--
-- Name: persons_id_person_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.persons_id_person_seq OWNED BY public.persons.id_person;


--
-- Name: products_id_product_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.products_id_product_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.products_id_product_seq OWNER TO postgres;

--
-- Name: products_id_product_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.products_id_product_seq OWNED BY public.products.id_product;


--
-- Name: sales_id_sale_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.sales_id_sale_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.sales_id_sale_seq OWNER TO postgres;

--
-- Name: sales_id_sale_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.sales_id_sale_seq OWNED BY public.sales.id_sale;


--
-- Name: sectors_id_sector_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.sectors_id_sector_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.sectors_id_sector_seq OWNER TO postgres;

--
-- Name: sectors_id_sector_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.sectors_id_sector_seq OWNED BY public.sectors.id_sector;


--
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.users_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.users_id_seq OWNER TO postgres;

--
-- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;


--
-- Name: brands id_brand; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.brands ALTER COLUMN id_brand SET DEFAULT nextval('public.brands_id_brand_seq'::regclass);


--
-- Name: contacts id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.contacts ALTER COLUMN id SET DEFAULT nextval('public.contacts_id_seq'::regclass);


--
-- Name: filiais id_filial; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.filiais ALTER COLUMN id_filial SET DEFAULT nextval('public.filiais_id_filial_seq'::regclass);


--
-- Name: itens_sale id_item_sequen; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.itens_sale ALTER COLUMN id_item_sequen SET DEFAULT nextval('public.itens_sale_id_item_sequen_seq'::regclass);


--
-- Name: persons id_person; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.persons ALTER COLUMN id_person SET DEFAULT nextval('public.persons_id_person_seq'::regclass);


--
-- Name: products id_product; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products ALTER COLUMN id_product SET DEFAULT nextval('public.products_id_product_seq'::regclass);


--
-- Name: sales id_sale; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sales ALTER COLUMN id_sale SET DEFAULT nextval('public.sales_id_sale_seq'::regclass);


--
-- Name: sectors id_sector; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sectors ALTER COLUMN id_sector SET DEFAULT nextval('public.sectors_id_sector_seq'::regclass);


--
-- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);


--
-- Data for Name: brands; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.brands (id_brand, created_at, updated_at, name_brand) FROM stdin;
1	2023-06-30 15:16:50.298719	\N	Geral
\.


--
-- Data for Name: contacts; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.contacts (id, created_at, updated_at, name, email, phone, comments) FROM stdin;
\.


--
-- Data for Name: filiais; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.filiais (id_filial, created_at, updated_at, name_filial, fantasia, address, cnpj, inscric, phone, email) FROM stdin;
1	2023-06-30 15:16:50.298719	\N	Ademir S de Almeida MEI.	CENTRO INFORMATICA	Av, Castro Alves, 1241	18069383000110	isento	44988521033	centroserra@gmail.com
\.


--
-- Data for Name: itens_sale; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.itens_sale (id_item_sequen, created_at, fk_sale, fk_product, amount_product, val_product, total_product) FROM stdin;
235	2023-09-16 16:29:15.248561	28	1	6	49.90	299.40
194	2023-09-15 16:25:42.272952	23	1	4	49.90	199.60
195	2023-09-15 16:25:42.427985	23	2	4	580.00	2320.00
196	2023-09-15 16:25:42.439558	23	3	4	180.00	720.00
197	2023-09-15 16:25:42.450372	23	4	7	190.00	1330.00
236	2023-09-16 16:29:15.264165	28	2	6	580.00	3480.00
237	2023-09-16 16:29:15.275217	28	3	5	180.00	900.00
198	2023-09-15 19:38:32.153982	24	2	6	580.00	3480.00
199	2023-09-15 19:38:32.173748	24	23	18	2.50	45.00
200	2023-09-15 19:38:32.18479	24	24	3	90.00	270.00
201	2023-09-15 19:56:14.637424	25	22	4	40.00	160.00
238	2023-09-16 16:29:15.286027	28	4	7	190.00	1330.00
239	2023-09-16 16:29:15.297156	28	5	5	138.00	690.00
240	2023-09-16 16:29:15.308191	28	6	4	2.40	9.60
241	2023-09-16 16:29:15.319976	28	7	6	38.00	228.00
242	2023-09-16 16:29:15.331077	28	8	5	580.00	2900.00
243	2023-09-16 16:29:15.342264	28	9	7	8.00	56.00
244	2023-09-16 16:29:15.353324	28	10	4	23.00	92.00
245	2023-09-16 16:29:15.364324	28	11	4	80.00	320.00
279	2023-09-18 09:09:04.211363	33	3	5	180.00	900.00
202	2023-09-16 09:03:13.888188	26	6	19	2.40	45.60
203	2023-09-16 09:03:14.031915	26	7	2	38.00	76.00
204	2023-09-16 09:03:14.04301	26	3	2	180.00	360.00
205	2023-09-16 09:03:14.054506	26	2	3	580.00	1740.00
206	2023-09-16 09:03:14.065008	26	18	4	2.00	8.00
207	2023-09-16 09:03:14.075957	26	20	3	3.50	10.50
208	2023-09-16 09:03:14.087353	26	24	3	90.00	270.00
209	2023-09-16 09:03:14.09824	26	22	4	40.00	160.00
210	2023-09-16 09:16:16.618044	27	25	5	250.00	1250.00
211	2023-09-16 09:16:16.628963	27	21	4	600.00	2400.00
212	2023-09-16 09:16:16.639957	27	22	4	40.00	160.00
213	2023-09-16 09:16:16.650814	27	23	4	2.50	10.00
214	2023-09-16 09:16:16.662079	27	24	4	90.00	360.00
215	2023-09-16 09:16:16.673129	27	20	6	3.50	21.00
216	2023-09-16 09:16:16.684134	27	19	5	45.90	229.50
217	2023-09-16 09:16:16.696169	27	18	5	2.00	10.00
218	2023-09-16 09:16:16.707304	27	17	5	23.90	119.50
219	2023-09-16 09:16:16.718696	27	13	4	380.00	1520.00
260	2023-09-16 17:59:53.539571	29	1	7	49.90	349.30
261	2023-09-16 17:59:53.548795	29	2	5	580.00	2900.00
262	2023-09-16 17:59:53.559513	29	3	5	180.00	900.00
263	2023-09-16 17:59:53.570453	29	4	7	190.00	1330.00
264	2023-09-16 17:59:53.581513	29	7	5	38.00	190.00
296	2023-09-18 09:36:37.828686	35	3	4	180.00	720.00
297	2023-09-18 09:36:37.857418	35	6	4	2.40	9.60
298	2023-09-18 09:36:37.868384	35	18	4	2.00	8.00
299	2023-09-18 09:36:37.880436	35	20	4	3.50	14.00
265	2023-09-16 18:12:55.427729	30	1	5	49.90	249.50
266	2023-09-16 18:12:55.43716	30	2	9	580.00	5220.00
267	2023-09-16 18:12:55.44804	30	3	4	180.00	720.00
268	2023-09-16 18:12:55.459318	30	4	5	190.00	950.00
269	2023-09-17 17:11:01.262884	31	1	6	49.90	299.40
270	2023-09-17 17:11:01.350838	31	2	3	580.00	1740.00
271	2023-09-17 17:11:01.361811	31	3	4	180.00	720.00
272	2023-09-17 17:11:01.372811	31	4	4	190.00	760.00
300	2023-09-18 09:50:26.67702	36	9	4	8.00	32.00
301	2023-09-18 09:50:26.687998	36	3	4	180.00	720.00
302	2023-09-18 09:50:26.699908	36	23	4	2.50	10.00
303	2023-09-18 09:50:26.71079	36	6	4	2.40	9.60
304	2023-09-18 09:50:26.722099	36	11	4	80.00	320.00
305	2023-09-18 09:50:26.733041	36	18	4	2.00	8.00
306	2023-09-18 09:50:26.744023	36	1	4	49.90	199.60
307	2023-09-18 09:50:26.755306	36	10	5	23.00	115.00
273	2023-09-17 21:21:56.486251	32	3	5	180.00	900.00
274	2023-09-17 21:21:56.538901	32	9	4	8.00	32.00
275	2023-09-17 21:21:56.550631	32	23	5	2.50	12.50
276	2023-09-17 21:21:56.561534	32	6	6	2.40	14.40
277	2023-09-17 21:21:56.572658	32	11	4	80.00	320.00
278	2023-09-17 21:21:56.583161	32	10	9	23.00	207.00
308	2023-09-18 10:25:03.880574	37	3	4	180.00	720.00
309	2023-09-18 10:25:03.956404	37	9	4	8.00	32.00
310	2023-09-18 10:25:04.022035	37	23	4	2.50	10.00
311	2023-09-18 10:25:04.100877	37	6	4	2.40	9.60
312	2023-09-18 10:25:04.111582	37	8	1	580.00	580.00
313	2023-09-18 10:25:04.122768	37	12	3	180.00	540.00
280	2023-09-18 09:09:04.419634	33	9	4	8.00	32.00
281	2023-09-18 09:09:04.431012	33	23	5	2.50	12.50
282	2023-09-18 09:09:04.442279	33	6	4	2.40	9.60
283	2023-09-18 09:09:04.453096	33	11	4	80.00	320.00
284	2023-09-18 09:09:04.463963	33	10	5	23.00	115.00
285	2023-09-18 09:09:04.475368	33	1	4	49.90	199.60
286	2023-09-18 09:09:04.48658	33	18	5	2.00	10.00
287	2023-09-18 09:09:04.497634	33	20	4	3.50	14.00
288	2023-09-18 09:09:04.508678	33	5	4	138.00	552.00
289	2023-09-18 09:09:04.519416	33	8	3	580.00	1740.00
314	2023-09-18 10:35:26.682112	38	3	4	180.00	720.00
315	2023-09-18 10:35:26.692757	38	9	4	8.00	32.00
316	2023-09-18 10:35:26.703652	38	10	5	23.00	115.00
317	2023-09-18 10:35:26.714851	38	11	5	80.00	400.00
318	2023-09-18 10:35:26.725957	38	5	4	138.00	552.00
319	2023-09-18 10:35:26.736823	38	20	6	3.50	21.00
320	2023-09-18 10:35:26.74832	38	15	5	45.00	225.00
246	2023-09-16 16:29:15.375268	28	12	4	180.00	720.00
247	2023-09-16 16:29:15.386582	28	13	5	380.00	1900.00
248	2023-09-16 16:29:15.39783	28	14	5	968.00	4840.00
249	2023-09-16 16:29:15.408809	28	15	5	45.00	225.00
250	2023-09-16 16:29:15.419692	28	16	5	160.00	800.00
220	2023-09-16 09:16:16.729215	27	14	5	968.00	4840.00
221	2023-09-16 09:16:16.740333	27	15	4	45.00	180.00
222	2023-09-16 09:16:16.752128	27	16	4	160.00	640.00
223	2023-09-16 09:16:16.761908	27	9	5	8.00	40.00
224	2023-09-16 09:16:16.773499	27	10	5	23.00	115.00
251	2023-09-16 16:29:15.431031	28	17	5	23.90	119.50
252	2023-09-16 16:29:15.442042	28	18	4	2.00	8.00
253	2023-09-16 16:29:15.453077	28	19	4	45.90	183.60
225	2023-09-16 09:16:16.788892	27	11	5	80.00	400.00
226	2023-09-16 09:16:16.79525	27	12	4	180.00	720.00
227	2023-09-16 09:16:16.807098	27	5	7	138.00	966.00
228	2023-09-16 09:16:16.81822	27	6	6	2.40	14.40
229	2023-09-16 09:16:16.829011	27	7	6	38.00	228.00
230	2023-09-16 09:16:16.840213	27	8	5	580.00	2900.00
231	2023-09-16 09:16:16.851351	27	4	6	190.00	1140.00
232	2023-09-16 09:16:16.862386	27	3	5	180.00	900.00
233	2023-09-16 09:16:16.87415	27	2	5	580.00	2900.00
234	2023-09-16 09:16:16.884504	27	1	5	49.90	249.50
254	2023-09-16 16:29:15.464468	28	20	5	3.50	17.50
255	2023-09-16 16:29:15.475294	28	21	6	600.00	3600.00
256	2023-09-16 16:29:15.486198	28	22	5	40.00	200.00
257	2023-09-16 16:29:15.497329	28	23	3	2.50	7.50
258	2023-09-16 16:29:15.508994	28	24	8	90.00	720.00
259	2023-09-16 16:29:15.519433	28	25	5	250.00	1250.00
321	2023-09-18 11:03:44.102985	39	6	3	2.40	7.20
322	2023-09-18 11:03:44.112331	39	3	4	180.00	720.00
323	2023-09-18 11:03:44.123293	39	20	4	3.50	14.00
324	2023-09-18 11:03:44.134022	39	18	4	2.00	8.00
290	2023-09-18 09:27:17.877077	34	3	5	180.00	900.00
291	2023-09-18 09:27:17.888336	34	9	6	8.00	48.00
292	2023-09-18 09:27:17.899563	34	23	5	2.50	12.50
293	2023-09-18 09:27:17.910659	34	6	5	2.40	12.00
294	2023-09-18 09:27:17.921674	34	11	5	80.00	400.00
295	2023-09-18 09:27:17.932757	34	10	5	23.00	115.00
325	2023-09-18 11:13:34.791562	40	3	4	180.00	720.00
326	2023-09-18 11:13:34.834078	40	18	4	2.00	8.00
327	2023-09-18 11:13:34.888934	40	1	4	49.90	199.60
328	2023-09-18 11:13:34.899955	40	10	4	23.00	92.00
329	2023-09-18 11:13:34.911226	40	11	4	80.00	320.00
330	2023-09-18 11:13:34.922209	40	20	4	3.50	14.00
331	2023-09-18 11:13:34.933245	40	7	3	38.00	114.00
\.


--
-- Data for Name: persons; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.persons (id_person, created_at, updated_at, name_pers, cpf_pers, address_pers, fk_name_filial, fk_id_user, phone_pers) FROM stdin;
5	2023-09-06 11:54:59.041598	2023-09-18 09:36:22.654814	Ademir Souza de Almeida	74276697972	Avenida Castro Alves 1241	1	1	44988521033
6	2023-09-06 11:59:10.162784	2023-09-18 11:02:07.255666	Maria Luiza de Almeida	88888888888	Rua Paraiba s\\n	1	2	99999999999
7	2023-09-17 20:44:11.404057	2023-09-18 11:13:19.245601	Francieli Dalsente	06332154344	Rua Paraiba S/n	1	2	44988764488
\.


--
-- Data for Name: products; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.products (id_product, created_at, updated_at, descric_product, val_max_product, val_min_product, fk_brand, fk_sector, bar_code, image) FROM stdin;
2	2023-06-30 15:17:43.890506	2023-07-14 23:04:34.477788	Rec Satelite Midia Box B6 Century	580.00	550.00	1	2	7898931486252	rec_midiabox_b6.jpeg
15	2023-06-30 15:17:44.035085	2023-07-31 18:57:49.560479	Fonte 12V 2AMP UNIVERSAL	45.00	40.00	1	1	870438	\N
4	2023-06-30 15:17:43.912795	2023-09-05 21:07:51.5444	Roteador Wiffi TP-Link 300Mbps 	190.00	170.00	1	4	12345678	\N
18	2023-06-30 15:17:44.067606	2023-09-06 08:39:25.108978	Conector F RG59 com anel	2.00	1.50	1	2	4444	conector_f_c_anel_rg59.jpg
1	2023-06-30 15:17:43.834464	2023-09-06 11:45:57.740864	Caixa de Som Multimidia USB	49.90	45.90	1	3	1234	\N
25	2023-09-06 11:46:40.384503	2023-09-06 11:47:06.019555	Produto de teste sendo testado	250.00	245.00	1	1	4525245245625	\N
10	2023-06-30 15:17:43.979526	\N	Cabo HDMI 1.8M	23.00	20.00	1	1	646464564	\N
11	2023-06-30 15:17:43.990304	\N	Cabo HDMI 12.M	80.00	80.00	1	1	6645645645	\N
24	2023-07-04 11:30:45.895372	2023-09-15 19:43:34.907239	Serviço de instalação de Antena KU Offset 60cm	90.00	85.00	1	2	1	Antena-60cm.png
23	2023-07-03 07:41:25.024476	2023-09-17 21:28:45.853924	Cabo coaxial + bipolar CFTV interno	2.50	2.30	1	1	6425646456456	\N
21	2023-07-02 21:15:35.236797	2023-07-09 09:13:08.632229	Monitor LCD 15" Samsung VGA	600.00	580.00	1	3	6575675675	\N
17	2023-06-30 15:17:44.056835	\N	Mouse Optico Pisc PS2 3bts	23.90	20.00	1	3	7898940742042	\N
19	2023-06-30 15:17:44.078492	\N	Teclado ABNT Padrão PT 	45.90	39.90	1	3	5555	\N
5	2023-06-30 15:17:43.924608	2023-07-02 13:29:08.361977	Estabilizador 300VA Ragtec	138.00	120.00	1	1	123456789	\N
12	2023-06-30 15:17:44.001796	\N	Roteador Wirelles Mercusys 300mbps	180.00	170.00	1	4	8324982383	\N
13	2023-06-30 15:17:44.013423	2023-07-03 17:00:51.428831	SmartTV Box Aquario	380.00	350.00	1	5	57539094030	\N
16	2023-06-30 15:17:44.045764	\N	Conversor Digital Aquario UHF	160.00	140.00	1	5	7898348538087	\N
8	2023-06-30 15:17:43.957493	\N	Rec Satelite B5 Elsys Sinal Digital	580.00	530.00	1	2	7898348538087	rec_sat_b5.jpg
14	2023-06-30 15:17:44.023278	\N	Link Roteador 4G Aquario	968.00	968.00	1	4	88583299399	link_rot_4g_aquario.jpg
6	2023-06-30 15:17:43.935355	2023-07-03 16:47:07.378747	Cabo Coaxial RG59 S/Digital	2.40	2.30	1	2	99999999	cabo_coaxial_rg59.jpg
3	2023-06-30 15:17:43.903095	2023-07-02 20:40:38.877132	Antena Parabolica OffSet 60cm	180.00	160.00	1	2	1234567	ant_offset_60_century.jpeg
20	2023-06-30 15:17:44.089531	\N	 Emenda F RG59 Coaxial com anilha	3.50	3.00	1	2	676767	emenda_f_rg59.jpeg
7	2023-06-30 15:17:43.946009	2023-07-04 10:37:00.160213	LNBF universal single GS0611	38.00	35.90	1	2	7988414430723	lnbf-ku-univ.jpg
9	2023-06-30 15:17:43.96857	2023-07-05 10:41:42.511204	Bateria 9V Universal	8.00	7.00	1	1	898854398988	\N
22	2023-07-03 07:41:24.857703	2023-07-06 11:19:08.326791	Suporte TV Fixo led lcd 10 - 71" Brasforma	40.00	38.00	1	1	7896689113345	\N
\.


--
-- Data for Name: sales; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.sales (id_sale, created_at, fk_name_pers, val_rec, disc_sale, total_sale, fk_name_filial, fk_name_user) FROM stdin;
30	2023-09-16 18:12:55.38356	5	7139.50	457.00	6682.50	1	1
35	2023-09-18 09:36:37.773956	5	751.60	45.00	706.60	1	1
31	2023-09-17 17:11:01.212625	6	3519.40	34.00	3485.40	1	2
40	2023-09-18 11:13:34.753183	7	1467.60	67.00	1400.60	1	2
32	2023-09-17 21:21:56.438456	7	1485.90	45.00	1440.90	1	2
36	2023-09-18 09:50:26.65715	5	1414.20	120.00	1294.20	1	1
37	2023-09-18 10:25:03.823245	5	1891.60	45.00	1846.60	1	1
28	2023-09-16 16:29:15.1211	5	24896.10	567.00	24329.10	1	1
33	2023-09-18 09:09:04.059939	6	3904.70	45.00	3859.70	1	2
29	2023-09-16 17:59:53.493034	5	5669.30	45.00	5624.30	1	1
27	2023-09-16 09:16:16.594733	5	22312.90	1200.00	21112.90	1	1
38	2023-09-18 10:35:26.640821	7	2065.00	89.00	1976.00	1	2
23	2023-09-15 16:25:41.935335	5	4569.60	45.00	4524.60	1	1
34	2023-09-18 09:27:17.857774	7	1487.50	34.00	1453.50	1	2
39	2023-09-18 11:03:44.062376	6	749.20	8.00	741.20	1	2
24	2023-09-15 19:38:32.128288	5	3795.00	56.00	3739.00	1	1
25	2023-09-15 19:56:14.618637	5	160.00	4.00	156.00	1	1
26	2023-09-16 09:03:13.694928	5	2670.10	45.00	2625.10	1	1
\.


--
-- Data for Name: sectors; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.sectors (id_sector, created_at, updated_at, name_sector) FROM stdin;
1	2023-06-30 15:16:50.298719	\N	Geral
2	2023-07-11 13:24:11.479396	\N	Satelite
3	2023-07-11 14:19:37.098533	\N	Informatica
4	2023-07-11 14:20:59.717553	\N	Telecom
5	2023-07-11 14:22:50.914198	\N	TV
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (id, created_at, updated_at, name, username, password, privilege) FROM stdin;
2	2023-09-17 12:34:13.024664	2023-09-18 08:11:42.248207	Compras	compras@centroinfo.net	$2a$10$.e4u1tYzeSSWy0OGFPuna.3oHbu6wULQ.pF10iNa22RI0IeUqLcOK	2
1	2023-09-06 11:52:50.347602	2023-09-18 08:26:35.259191	Administrador	admin@centroinfo.net	$2a$10$jnM9hyurhd9lFnDOvuqv4.jQmLk9nmJHUy37LywWu5lVIHRoSfSJK	1
\.


--
-- Name: brands_id_brand_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.brands_id_brand_seq', 1, true);


--
-- Name: contacts_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.contacts_id_seq', 1, false);


--
-- Name: filiais_id_filial_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.filiais_id_filial_seq', 1, true);


--
-- Name: itens_sale_id_item_sequen_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.itens_sale_id_item_sequen_seq', 331, true);


--
-- Name: persons_id_person_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.persons_id_person_seq', 7, true);


--
-- Name: products_id_product_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.products_id_product_seq', 25, true);


--
-- Name: sales_id_sale_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.sales_id_sale_seq', 40, true);


--
-- Name: sectors_id_sector_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.sectors_id_sector_seq', 5, true);


--
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_id_seq', 2, true);


--
-- Name: brands brands_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.brands
    ADD CONSTRAINT brands_pkey PRIMARY KEY (id_brand);


--
-- Name: contacts contacts_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.contacts
    ADD CONSTRAINT contacts_pkey PRIMARY KEY (id);


--
-- Name: filiais filiais_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.filiais
    ADD CONSTRAINT filiais_pkey PRIMARY KEY (id_filial);


--
-- Name: itens_sale itens_sale_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.itens_sale
    ADD CONSTRAINT itens_sale_pkey PRIMARY KEY (id_item_sequen, fk_sale);


--
-- Name: persons persons_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.persons
    ADD CONSTRAINT persons_pkey PRIMARY KEY (id_person);


--
-- Name: products products_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products
    ADD CONSTRAINT products_pkey PRIMARY KEY (id_product);


--
-- Name: sales sales_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sales
    ADD CONSTRAINT sales_pkey PRIMARY KEY (id_sale);


--
-- Name: sectors sectors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sectors
    ADD CONSTRAINT sectors_pkey PRIMARY KEY (id_sector);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: users users_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_username_key UNIQUE (username);


--
-- Name: itens_sale trg_sum_note; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trg_sum_note AFTER INSERT ON public.itens_sale FOR EACH ROW EXECUTE FUNCTION public.fc_sum_note();


--
-- Name: products brand_fk_brand; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products
    ADD CONSTRAINT brand_fk_brand FOREIGN KEY (fk_brand) REFERENCES public.brands(id_brand) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: sales filial_fk_name_filial; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sales
    ADD CONSTRAINT filial_fk_name_filial FOREIGN KEY (fk_name_filial) REFERENCES public.filiais(id_filial) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: persons person_fk_id_user; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.persons
    ADD CONSTRAINT person_fk_id_user FOREIGN KEY (fk_id_user) REFERENCES public.users(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: persons person_fk_name_filial; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.persons
    ADD CONSTRAINT person_fk_name_filial FOREIGN KEY (fk_name_filial) REFERENCES public.filiais(id_filial) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: sales person_fk_name_pers; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sales
    ADD CONSTRAINT person_fk_name_pers FOREIGN KEY (fk_name_pers) REFERENCES public.persons(id_person) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: itens_sale product_fk_product; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.itens_sale
    ADD CONSTRAINT product_fk_product FOREIGN KEY (fk_product) REFERENCES public.products(id_product) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: itens_sale sale_fk_sale; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.itens_sale
    ADD CONSTRAINT sale_fk_sale FOREIGN KEY (fk_sale) REFERENCES public.sales(id_sale) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: products sector_fk_sector; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products
    ADD CONSTRAINT sector_fk_sector FOREIGN KEY (fk_sector) REFERENCES public.sectors(id_sector) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: sales user_fk_name_user; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sales
    ADD CONSTRAINT user_fk_name_user FOREIGN KEY (fk_name_user) REFERENCES public.users(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- PostgreSQL database dump complete
--

